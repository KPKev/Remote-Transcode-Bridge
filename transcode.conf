# =============================================================
# Transcode Script Configuration (transcode.conf)
# =============================================================
# Copy or edit this file to change behaviour without touching
# the main transcode-to-mp4-with-gpu.sh script. Any variable
# defined here overrides the script's internal default.
# =============================================================

# ----------------- SSH / Remote GPU -----------------
SSH_HOST="192.168.7.16"    # IP or hostname of Windows box running NVENC
SSH_PORT="22"              # SSH port (22 by default)
SSH_USER="12227"           # SSH login user
SSH_KEY="/config/.ssh/id_rsa"  # Private key path inside container

# ----------------- Encoding Targets -----------------
# Video quality caps for Plex Direct-Play
BITRATE_TARGET="6M"        # Average bitrate target (VBR-HQ)
BITRATE_MAX="8M"           # Peak maxrate (≤ 8 Mbit/s)
BITRATE_BUFSIZE="16M"      # Rate-control buffer
RESOLUTION_MAX="1920x1080" # Max output resolution (widthxheight)
NVENC_PRESET="p4"          # Quality preset for h264_nvenc (p4 ≈ slow)

# ----------------- Logging -----------------
LOG_MAX_LINES="1000"       # Rotate log after this many lines
LOG_KEEP="5"              # Keep this many rotated log files

# ----------------- Sonarr / Radarr -----------------
SONARR_URL="http://sonarr:8989"
SONARR_API_KEY="d1684e618f71469fb12d0c4d98f6f4bc"
RADARR_URL="http://radarr:7878"
RADARR_API_KEY="9fc78fa0ea384574a014e06e9c58a90c"

# ----------------- Plex Library Refresh -------------
PLEX_URL="http://plex:32400"   # Base URL (no trailing slash)
PLEX_TOKEN="gYQ-8jcpirPeb_7EynY4"                 # Plex auth token (leave blank to disable refresh)
PLEX_SECTION_ID_TV="2"        # TV Shows library section key
PLEX_SECTION_ID_MOVIES="1"    # Movies library section key

# ----------------- Advanced / Testing -----------------
# Set to "true" to skip the GPU check and force the script to use the
# CPU fallback. Useful for testing the CPU path without shutting down
# the remote GPU host.
# Default is "false".
FORCE_CPU_TRANSCODE="false"   

# This flag enables hardware acceleration on the Synology NAS when using CPU transcoding.
# Requires the docker container to have access to '/dev/dri'.
# Set to "true" to enable, "false" to use software-based CPU transcoding.
#ENABLE_CPU_HW_ACCEL="true"

# ----------------- Transcoding Rules -----------------
# A space-separated list of video codecs to transcode.
# Example: "h265 hevc vp9"
# Default is "h265 hevc".
SOURCE_CODECS="h265 hevc"

# Set to "true" to transcode Matroska (.mkv) files.
# Set to "false" to skip them.
# Default is "true".
CONVERT_MKV="true"

# Any video file smaller than this size (in bytes) will be skipped.
# Useful for ignoring sample files. Default is 100MB.
# Default is 104857600.
MIN_SIZE="104857600"